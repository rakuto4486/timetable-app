{% extends 'base.html' %}
{% block content %}

<div style="margin-top: 20px;"></div>

<h3>ğŸ“… ä»Šæ—¥ï¼ˆ{{ today_schedule[0].day if today_schedule else '---' }}ï¼‰ã®æˆæ¥­</h3>
<ul>
    {% for item in today_schedule %}
        <li>{{ item.period }}é™ï¼š{{ item.class_name }}ï¼ˆ{{ item.room }}ï¼‰ - {{ item.teacher }}</li>
    {% else %}
        <li>æˆæ¥­ã¯ã‚ã‚Šã¾ã›ã‚“ï¼</li>
    {% endfor %}
</ul>

<h3>ğŸ“ ä»Šæ—¥ã®æˆæ¥­ã«é–¢ä¿‚ã™ã‚‹ã‚„ã‚‹ã“ã¨</h3>
<ul>
    {% for group in today_todos %}
        <li><strong>{{ group.class_name }}</strong>
            <ul>
                {% for task in group.tasks %}
                    <li>
                        {% if task.done %}
                            âœ… <s>{{ task.task }}</s>
                        {% else %}
                            {{ task.task }}
                        {% endif %}
                        [<a href="{{ url_for('mark_done', index=loop.index0) }}">
                            {% if task.done %}æˆ»ã™{% else %}å®Œäº†{% endif %}
                        </a>]
                        [<a href="{{ url_for('delete_todo', index=loop.index0) }}">å‰Šé™¤</a>]
                    </li>
                {% endfor %}
            </ul>
        </li>
    {% else %}
        <li>ã‚„ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ï¼</li>
    {% endfor %}
</ul>

<hr>

<h3>ğŸ“‹ ã‚„ã‚‹ã“ã¨ãƒªã‚¹ãƒˆï¼ˆå…¨ä½“ï¼‰</h3>
<form method="post">
    æˆæ¥­åï¼ˆç´ã¥ã‘ãŸã„å ´åˆï¼‰ï¼š<input type="text" name="class_name">
    ã‚„ã‚‹ã“ã¨ï¼š<input type="text" name="task" placeholder="ä¾‹: ãƒ¬ãƒãƒ¼ãƒˆæå‡º" required>
    æœŸé™ï¼š<input type="date" name="due_date">
    <input type="submit" value="è¿½åŠ ">
</form>

<ul>
    {% for todo in todos %}
    <li>
        {% if todo.done %}
            âœ… <s>{{ todo.task }}</s>
        {% else %}
            {{ todo.task }}
        {% endif %}
        {% if todo.class_name %}
            <span style="color: gray;">ï¼ˆ{{ todo.class_name }}ï¼‰</span>
        {% endif %}

        {% if todo.due_date %}
            - <small>
                {% if todo.days_left > 0 %}
                    ã‚ã¨{{ todo.days_left }}æ—¥
                {% elif todo.days_left == 0 %}
                    â° ä»Šæ—¥ãŒç· åˆ‡ï¼
                {% else %}
                    âš ï¸ æœŸé™åˆ‡ã‚Œï¼ˆ{{ todo.days_left | abs }}æ—¥å‰ï¼‰
                {% endif %}
              </small>
        {% endif %}

        [<a href="{{ url_for('mark_done', index=loop.index0) }}">
            {% if todo.done %}æˆ»ã™{% else %}å®Œäº†{% endif %}
        </a>]
        [<a href="{{ url_for('delete_todo', index=loop.index0) }}">å‰Šé™¤</a>]
    </li>
    {% endfor %}
</ul>

<hr>

<a href="{{ url_for('schedule_page') }}">ğŸ“… æ™‚é–“å‰²ã‚’ç™»éŒ²ã—ã«è¡Œã</a><br>
<a href="{{ url_for('grades_page') }}">ğŸ“Š æˆç¸¾ã‚’ç¢ºèªã—ã«è¡Œã</a>
{% endblock %}
